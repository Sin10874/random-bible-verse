# 快速测试指南

## 🚀 快速开始

### 第一步：数据验证测试（无需启动服务器）

运行此测试验证所有数据文件和配置是否正确：

```bash
node test-generators.js
```

**此测试会检查：**
- ✅ 所有数据文件存在且格式正确
- ✅ 13 个类别配置完整
- ✅ 300+ 经文引用有效
- ✅ API 过滤逻辑正确
- ✅ 页面文件和路由配置正确
- ✅ 首页集成正确

**预期输出：**
```
============================================================
测试结果摘要
============================================================

总测试数: 50+
✅ 通过: 50+
❌ 失败: 0
⚠️  警告: 1

🎉 所有测试通过！功能已准备就绪！
```

---

### 第二步：启动开发服务器

```bash
# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

等待服务器启动，看到类似输出：
```
✓ Ready in 2.5s
○ Local:        http://localhost:3000
```

---

### 第三步：API 功能测试（需要服务器运行）

**在新终端窗口运行：**

```bash
node test-api.js
```

**此测试会检查：**
- ✅ 基础 API 端点工作
- ✅ Debug 模式正常
- ✅ 6 个主题类别过滤
- ✅ 3 个书卷类别过滤
- ✅ 4 个场景类别过滤
- ✅ 去重机制有效
- ✅ 错误处理正确
- ✅ 响应性能良好

**预期输出：**
```
============================================================
测试结果摘要
============================================================

总测试数: 20+
✅ 通过: 20+
❌ 失败: 0

🎉 所有 API 测试通过！
```

---

### 第四步：浏览器手动测试

访问：http://localhost:3000

#### 测试清单：

**首页测试：**
- [ ] 页面正常加载
- [ ] 向下滚动看到 "Trending Generators" 区域
- [ ] 看到 13 个生成器卡片（4 列网格布局）
- [ ] 卡片悬停有放大效果
- [ ] 点击任意卡片跳转到对应页面

**生成器页面测试（任选 3-5 个测试）：**

1. **Love 生成器** - http://localhost:3000/love-bible-verses
   - [ ] 页面标题正确："Bible Verses About Love"
   - [ ] 点击 "Generate Love Verse" 按钮
   - [ ] 显示关于"爱"的经文（如 John 3:16, 1 Corinthians 13 等）
   - [ ] 点击 "Copy" 按钮
   - [ ] 看到 "✅ Copied" 提示
   - [ ] 滚动查看内容介绍部分

2. **Psalms 生成器** - http://localhost:3000/psalms-bible-verses
   - [ ] 生成的经文都来自诗篇（reference 以 "Psalms" 开头）
   - [ ] 多次点击生成，每次都是不同的经文
   - [ ] 经文内容与诗篇风格一致

3. **John 生成器** - http://localhost:3000/john-bible-verses
   - [ ] 生成的经文来自约翰福音（不是 1/2/3 John）
   - [ ] Reference 格式：如 "John 3:16", "John 14:6" 等

4. **随机测试其他生成器**
   - [ ] Hope: `/hope-bible-verses`
   - [ ] Strength: `/strength-bible-verses`
   - [ ] Peace: `/peace-bible-verses`
   - [ ] Prayer: `/prayer-bible-verses`
   - [ ] Comfort: `/comfort-bible-verses`

**响应式测试：**
- [ ] 打开浏览器开发者工具 (F12)
- [ ] 切换到移动设备视图
- [ ] 卡片改为 1-2 列布局
- [ ] 所有按钮可点击
- [ ] 文字清晰可读

**SEO 测试：**
- [ ] 查看页面源代码 (Ctrl+U)
- [ ] 找到 `<title>` 标签，内容正确
- [ ] 找到 `<meta name="description">` 标签
- [ ] 找到 Open Graph 标签 `<meta property="og:...`

---

## 🐛 常见问题

### 1. `node test-generators.js` 报错

**问题：** `Cannot find module 'fs'`
**解决：** 确保使用 Node.js 运行（不是浏览器）

**问题：** `文件不存在: .../verse-categories.json`
**解决：** 确保在项目根目录运行脚本

### 2. `node test-api.js` 无法连接

**问题：** `无法连接到开发服务器`
**解决：**
```bash
# 确保先启动了开发服务器
npm run dev

# 然后在新终端运行测试
node test-api.js
```

### 3. 经文引用无效

**问题：** `❌ love - 经文引用有效`
**解决：** 检查 `verse-categories.json` 中的引用格式是否与 `kjv-map.json` 一致

### 4. 图片不显示

**问题：** 卡片图片显示空白或 404
**原因：** 当前使用占位符图片 `/mountain-hero.jpg`
**解决：**
- 暂时不影响功能测试
- 后续添加自定义图片（参考 `IMAGE_GUIDE.md`）

---

## ✅ 全部通过后的下一步

当所有测试都通过后：

### 1. 构建生产版本
```bash
npm run build
```

### 2. 测试生产构建
```bash
npm start
```

访问 http://localhost:3000 再次测试所有功能

### 3. 生成 Sitemap
```bash
npm run postbuild
```

检查 `public/sitemap.xml` 是否包含所有 13 个新页面

### 4. 添加自定义图片
参考 `public/generators/IMAGE_GUIDE.md`

### 5. 准备部署
- 提交所有更改到 git
- 推送到远程仓库
- 在 Vercel/Netlify 等平台部署

---

## 📊 测试结果示例

### 成功的测试输出：

```bash
$ node test-generators.js

============================================================
测试 1: 验证数据文件
============================================================
✅ verse-categories.json 文件存在
✅ kjv-map.json 文件存在
✅ generators.ts 文件存在

============================================================
测试 2: 验证 JSON 数据格式
============================================================
✅ verse-categories.json 可以解析
✅ kjv-map.json 可以解析

============================================================
测试 3: 验证 13 个类别配置
============================================================
✅ 所有 13 个类别都存在
✅ 没有多余的类别

... (更多测试输出)

============================================================
测试结果摘要
============================================================

总测试数: 52
✅ 通过: 51
❌ 失败: 0
⚠️  警告: 1

🎉 所有测试通过！功能已准备就绪！

下一步:
1. 运行 npm install && npm run dev
2. 访问 http://localhost:3000 查看效果
3. 添加自定义图片（参考 IMAGE_GUIDE.md）
```

---

## 🎯 测试覆盖率

| 测试类别 | 测试项 | 覆盖率 |
|---------|--------|--------|
| 数据文件 | 3 项 | 100% |
| JSON 格式 | 2 项 | 100% |
| 类别配置 | 13 × 3 = 39 项 | 100% |
| 经文引用 | 10 项 | 100% |
| API 逻辑 | 5 项 | 100% |
| 页面文件 | 3 项 | 100% |
| 首页集成 | 3 项 | 100% |
| **总计** | **50+ 项** | **100%** |

---

## 💡 提示

- 💻 保持终端窗口打开以查看服务器日志
- 🔄 修改代码后，Next.js 会自动热重载
- 🐛 遇到问题查看浏览器控制台 (F12)
- 📝 测试完成后记录任何发现的问题

---

**准备好了吗？开始测试吧！** 🚀

```bash
# 第一步
node test-generators.js

# 第二步（新终端）
npm run dev

# 第三步（新终端）
node test-api.js

# 第四步
# 打开浏览器访问 http://localhost:3000
```
